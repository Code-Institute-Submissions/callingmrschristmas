{% extends "base.html" %}
{% load currency_tags %}
{% load static %}
{% block content %}
<section class="page-title mt-5">
  <h2 class="section-heading text-center">
    <span class="section-heading-upper mb-0">Our services</span>
    <span class="section-heading-lower">{{ obj.title }}</span>
  </h2>
</section>
{% for instance in queryset %}
{% if forloop.counter|divisibleby:2 %}
<section class="page-section">
  <div class="container">
    <div class="product-item">
      <div class="product-item-title d-flex">
        <div class="bg-faded p-5 d-flex ml-auto rounded">
          <h2 class="section-heading mb-0">
            <span class="section-heading-upper">{{ instance.tagline }}</span>
            <span class="section-heading-lower">{{ instance.title }}</span>
          </h2>
        </div>
      </div>
      <a href="{{ instance.get_absolute_url }}">
        <img
          class="product-item-img mx-auto d-flex rounded img-fluid mb-3 mb-lg-0"
          src="{% static 'img/service-images/' %}{{ instance.img_name }}.jpg"
          alt="{{ instance.img_alt }}"
        />
      </a>
      <div class="product-item-description d-flex mr-auto">
        <div class="bg-faded p-5 rounded">
          {{ instance.brief_description|linebreaks }}
          <h5>Cost: {% currency instance.price_in_p %}</h5>
          <form action="{% url 'cart:add_to_cart' instance.id %}" method="post">
            {% csrf_token %}
            <div class="input-group">
              <input type="number" name="quantity" min=1 max=999 class="form-control" placeholder="Quantity" required>
              <span class="input-group-btn">
                <button class="btn btn-lg btn-success" type="submit">Add</button>
              </span>
            </div>
          </form>
          <a href="{{ instance.get_absolute_url }}" class="btn btn-info btn-lg"
            ><i class="fas fa-open-book"></i> Read more</a
          >
        </div>
      </div>
    </div>
  </div>
</section>
{% else %}
<section class="page-section">
  <div class="container">
    <div class="product-item">
      <div class="product-item-title d-flex">
        <div class="bg-faded p-5 d-flex mr-auto rounded">
          <h2 class="section-heading mb-0">
            <span class="section-heading-upper">{{ instance.tagline }}</span>
            <span class="section-heading-lower">{{ instance.title }}</span>
          </h2>
        </div>
      </div>
      <a href="{{ instance.get_absolute_url }}">
          <img
            class="product-item-img mx-auto d-flex rounded img-fluid mb-3 mb-lg-0"
            src="{% static 'img/service-images/' %}{{ instance.img_name }}.jpg"
            alt="{{ instance.img_alt }}"
          />
        </a>
      <div class="product-item-description d-flex ml-auto">
        <div class="bg-faded p-5 rounded">
          {{ instance.brief_description|linebreaks }}
          <h5>Cost: {% currency instance.price_in_p %}</h5>
          <form action="{% url 'cart:add_to_cart' instance.id %}" method="post">
            {% csrf_token %}
            <div class="input-group">
              <input type="number" name="quantity" min=1 max=999 class="form-control" placeholder="Quantity" required>
              <span class="input-group-btn">
                <button class="btn btn-lg btn-success" type="submit">Add</button>
              </span>
            </div>
          </form>
          <a class="btn btn-info btn-lg" href="{{ instance.get_absolute_url }}"
            ><i class="fas fa-open-book"></i> Read more</a
          >
        </div>
      </div>
    </div>
  </div>
</section>
{% endif %}
{% empty %}
<div class="container bg-faded p-5 d-flex my-3 rounded">
  <h2 class="section-heading my-3">
    <span class="section-heading-upper"
      >No services to show yet for {{ category }}</span
    >
    <span class="section-heading-lower">Please check back soon</span>
  </h2>
</div>
{% endfor %}
<a class="btn btn-danger btn-lg" href="/services">Back</a>
{% endblock %}
